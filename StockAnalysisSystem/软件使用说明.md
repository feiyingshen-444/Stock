# 股票分析系统 - 软件使用说明

## 目录

1. [快速开始](#快速开始)
2. [功能详解](#功能详解)
3. [操作指南](#操作指南)
4. [常见问题](#常见问题)
5. [技巧提示](#技巧提示)

## 快速开始

### 首次启动

1. **启动应用程序**
   - 双击 `StockAnalysisSystem.exe` 启动程序
   - 如果是开发环境，在Visual Studio中按F5运行

2. **初始化数据库**
   - 首次启动时，程序会自动尝试创建数据库
   - 如果提示数据库连接错误，请检查SQL Server是否运行
   - 参考[常见问题](#常见问题)部分解决数据库连接问题

3. **开始使用**
   - 在顶部工具栏输入股票代码
   - 点击"查询"按钮即可查看股票信息

## 功能详解

### 1. 股票查询功能

**功能描述**: 根据股票代码查询股票的实时信息和历史数据

**使用方法**:
1. 在顶部"股票代码"文本框中输入股票代码
   - 例如：`AAPL`（苹果公司）、`MSFT`（微软）、`GOOGL`（谷歌）
   - 对于中国股票，可以使用：`000001`（平安银行）、`600000`（浦发银行）
2. 点击"查询"按钮
3. 等待数据加载（通常几秒钟）

**显示内容**:
- **股票名称**: 股票的完整名称
- **当前价格**: 最新的股票价格
- **涨跌幅**: 相对于前一交易日的涨跌百分比
  - 红色表示上涨
  - 绿色表示下跌
- **成交量**: 当天的交易量
- **价格走势图**: 显示股票的历史价格趋势

**注意事项**:
- 股票代码格式取决于使用的API
- 如果查询失败，请检查股票代码是否正确
- 某些API可能需要网络连接

### 2. 收藏功能

**功能描述**: 将常用股票添加到收藏列表，方便快速访问

**使用方法**:
1. 先查询要收藏的股票
2. 点击"添加到收藏"按钮
3. 股票会自动出现在左侧"收藏股票"列表中

**管理收藏**:
- 点击收藏列表中的股票可以快速查询
- 收藏的股票会持久保存到数据库
- 重启应用程序后收藏列表仍然保留

**限制**:
- 不能重复添加相同的股票
- 尝试添加已存在的股票会提示"该股票已在收藏列表中"

### 3. 最近查询记录

**功能描述**: 自动记录最近查询过的股票

**使用方法**:
- 查询股票后会自动添加到"最近查询"列表
- 点击列表中的股票可以快速重新查询

**特点**:
- 自动记录，无需手动操作
- 最多保存20条记录
- 按查询时间倒序排列
- 相同股票重复查询会更新位置到最前面

### 4. 数据刷新功能

**功能描述**: 更新当前显示股票的最新数据

**使用方法**:
1. 确保已查询了股票（界面显示股票信息）
2. 点击"刷新"按钮
3. 系统会重新从API获取最新数据并更新显示

**适用场景**:
- 需要查看股票的最新价格
- 监控股票价格变化
- 定期更新数据

### 5. 价格走势可视化

**功能描述**: 以图表形式展示股票价格的历史走势

**图表说明**:
- **X轴**: 时间（日期）
- **Y轴**: 股票价格
- **线条**: 收盘价走势

**时间范围**:
- 使用顶部的时间范围下拉框可以选择不同的时间段
- 选项包括：1天、1周、1月、3月、1年
- 注意：实际显示的数据范围取决于API支持

**交互功能**:
- 鼠标悬停可以查看具体数值
- 图表会自动缩放以适应数据范围
- 可以查看图例信息

## 操作指南

### 基本操作流程

#### 场景1：查询单个股票

```
步骤1: 启动应用程序
   ↓
步骤2: 输入股票代码（如：AAPL）
   ↓
步骤3: 点击"查询"按钮
   ↓
步骤4: 查看股票信息和图表
   ↓
步骤5: （可选）点击"添加到收藏"
```

#### 场景2：查看收藏的股票

```
步骤1: 点击左侧"收藏股票"列表中的股票
   ↓
步骤2: 自动查询并显示股票信息
   ↓
步骤3: 查看最新数据和图表
```

#### 场景3：对比多个股票

```
步骤1: 查询第一个股票（如：AAPL）
   ↓
步骤2: 记录或截图保存数据
   ↓
步骤3: 查询第二个股票（如：MSFT）
   ↓
步骤4: 对比两个股票的信息
```

**提示**: 当前版本不支持并排对比，建议使用收藏功能快速切换查看。

### 键盘快捷键

虽然当前版本没有自定义快捷键，但可以使用Windows标准快捷键：
- `Tab`: 在控件间切换焦点
- `Enter`: 在输入框聚焦时触发查询（需要代码支持）
- `Alt + F4`: 关闭应用程序

### 界面说明

#### 顶部工具栏
```
[股票代码输入框] [查询] [刷新] [添加到收藏] [时间范围▼]
```
- **股票代码输入框**: 输入要查询的股票代码
- **查询按钮**: 执行查询操作
- **刷新按钮**: 更新当前股票数据
- **添加到收藏**: 将当前股票加入收藏
- **时间范围**: 选择图表显示的时间范围

#### 左侧面板
```
┌──────────────┐
│  收藏股票    │
├──────────────┤
│ • AAPL       │
│ • MSFT       │
│ • GOOGL      │
└──────────────┘
┌──────────────┐
│  最近查询    │
├──────────────┤
│ • TSLA       │
│ • AMZN       │
└──────────────┘
```

#### 右侧面板
```
┌─────────────────────────────────┐
│  股票名称   当前价格   涨跌幅    │
│  Apple Inc.  $150.00   +2.5%    │
└─────────────────────────────────┘
│                                 │
│        价格走势图                │
│         [图表区域]              │
│                                 │
└─────────────────────────────────┘
```

#### 底部状态栏
- 显示当前操作状态
- "就绪"表示系统空闲
- "正在查询..."表示正在获取数据
- "查询成功"或"查询失败"表示操作结果

## 常见问题

### Q1: 查询股票时提示"未找到股票信息"

**可能原因**:
1. 股票代码输入错误
2. API服务不可用
3. 网络连接问题
4. API密钥无效

**解决方法**:
1. 检查股票代码是否正确（注意大小写）
2. 检查网络连接是否正常
3. 查看状态栏的错误提示
4. 如果使用真实API，检查API密钥配置

### Q2: 数据库连接失败

**错误信息**: "数据库初始化失败"或连接超时

**解决方法**:
1. **检查SQL Server服务**
   - 打开"服务"管理器（services.msc）
   - 找到"SQL Server (MSSQLSERVER)"或相关服务
   - 确保服务状态为"正在运行"

2. **检查连接字符串**
   - 打开 `Data/StockRepository.cs`
   - 检查连接字符串是否正确
   - Windows身份验证示例：`Server=localhost;Database=StockAnalysisDB;Integrated Security=True;`

3. **使用LocalDB（开发环境）**
   - 如果安装了Visual Studio，可以使用LocalDB
   - 修改连接字符串为：`Server=(localdb)\\mssqllocaldb;Database=StockAnalysisDB;Integrated Security=True;`

4. **创建数据库权限**
   - 确保当前Windows用户有创建数据库的权限
   - 或者使用有权限的SQL Server账号

### Q3: 图表不显示或显示异常

**可能原因**:
1. 没有历史数据
2. LiveCharts组件未正确加载
3. 数据格式问题

**解决方法**:
1. 确保查询的股票有历史数据
2. 检查NuGet包是否正确安装：`dotnet restore`
3. 重新构建项目：`dotnet build`

### Q4: 收藏列表丢失

**可能原因**:
1. 数据库被删除或重置
2. 数据库连接字符串变更导致连接到了不同的数据库

**解决方法**:
1. 检查数据库是否还存在
2. 查看连接字符串是否一致
3. 使用SQL Server Management Studio检查数据

### Q5: 程序运行缓慢

**可能原因**:
1. API响应慢
2. 数据库查询慢
3. 网络延迟

**解决方法**:
1. 检查网络连接速度
2. 优化数据库索引（如果需要）
3. 考虑添加数据缓存机制

### Q6: 如何更换股票API

**步骤**:
1. 打开 `Services/StockApiService.cs`
2. 修改 `GetStockDataAsync` 方法
3. 替换API调用逻辑
4. 根据新API的响应格式调整数据解析代码

**示例**:
```csharp
// 在GetStockDataAsync方法中
// 注释掉模拟数据调用
// return await GetMockStockDataAsync(stockCode);

// 使用真实API
return await GetRealStockDataAsync(stockCode);
```

## 技巧提示

### 1. 快速查询技巧

- **使用收藏列表**: 将常用的股票添加到收藏，避免重复输入代码
- **使用最近查询**: 快速查看最近查看过的股票
- **批量查询**: 虽然不支持批量，但可以快速切换收藏列表中的股票

### 2. 数据监控技巧

- **定期刷新**: 对于关注的股票，定期点击"刷新"获取最新数据
- **对比分析**: 查询不同股票，手动对比价格和趋势
- **记录数据**: 可以截图保存关键数据点

### 3. 提高效率

- **收藏常用股票**: 减少代码输入时间
- **使用键盘**: Tab键快速在控件间切换
- **保持窗口打开**: 随时可以快速查询

### 4. 数据分析建议

虽然当前版本功能有限，但可以通过以下方式分析：
1. **观察趋势**: 查看价格走势图的整体趋势
2. **关注涨跌幅**: 重点关注涨跌幅较大的股票
3. **成交量分析**: 结合价格和成交量判断市场情绪
4. **定期记录**: 记录关键数据点，建立自己的数据库

### 5. 最佳实践

- **定期备份数据库**: 保护收藏和查询记录
- **保持API密钥安全**: 不要将API密钥提交到公开仓库
- **网络连接**: 确保稳定的网络连接以获得最佳体验
- **数据验证**: 重要投资决策请使用官方和专业的金融数据服务

## 高级功能（未来版本）

以下功能可能在后续版本中实现：

- [ ] 多股票对比视图
- [ ] 技术指标计算（MA、MACD、RSI等）
- [ ] 价格预警功能
- [ ] 数据导出（Excel、CSV）
- [ ] 自定义图表样式
- [ ] 历史数据回放
- [ ] 股票筛选和搜索
- [ ] 投资组合管理

## 技术支持

如果遇到问题：

1. **查看日志**: 检查控制台输出或日志文件
2. **检查配置**: 验证数据库连接和API配置
3. **查看文档**: 参考README.md和项目结构说明
4. **提交Issue**: 在项目仓库中提交问题报告

---

**版本**: 1.0.0  
**最后更新**: 2024  
**适用系统**: Windows 10/11  
**运行时**: .NET 6.0 Desktop Runtime

---

**免责声明**: 本软件提供的股票数据仅供学习和参考使用，不构成投资建议。实际投资决策请咨询专业金融顾问，并使用官方和专业的金融数据服务。


