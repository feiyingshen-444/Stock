<Window x:Class="StockAnalysisSystem.DataVisualizationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        mc:Ignorable="d"
        Title="æ•°æ®å¯è§†åŒ–" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">

    <Window.Resources>
        <!-- é˜´å½±æ•ˆæžœ -->
        <DropShadowEffect x:Key="CardShadow"
                          BlurRadius="10"
                          ShadowDepth="2"
                          Opacity="0.15"
                          Color="#000000"/>

        <!-- çŽ°ä»£æŒ‰é’®æ ·å¼ -->
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#1976D2"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="12,4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1565C0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#0D47A1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- æ¶¨å¹…æ¡æ ·å¼ -->
        <Style x:Key="ChangeBarStyle" TargetType="Rectangle">
            <Setter Property="RadiusX" Value="2"/>
            <Setter Property="RadiusY" Value="2"/>
        </Style>
    </Window.Resources>

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20,12">
            <TextBlock Text="ðŸ“Š æˆ‘çš„æ”¶è—è‚¡ç¥¨åˆ†æž"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"/>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸï¼ˆå¸¦æ»šåŠ¨æ¡ï¼‰ -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- ä¸ŠåŠéƒ¨åˆ†ï¼šæ¶¨è·ŒæŽ’è¡Œæ¦œ -->
                <Border Grid.Row="0"
                        Background="White"
                        CornerRadius="8"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        Effect="{StaticResource CardShadow}"
                        Padding="25,20"
                        Margin="0,0,0,20"
                        MinHeight="280">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto" MinHeight="100"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto" MinHeight="100"/>
                        </Grid.RowDefinitions>

                        <!-- æ¶¨å¹…æ ‡é¢˜ -->
                        <TextBlock Text="ðŸ“ˆ ä»Šæ—¥æ¶¨å¹…æŽ’è¡Œæ¦œ"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="#212121"
                                   Margin="0,0,0,15"/>

                        <!-- æ¶¨å¹…åˆ—è¡¨ -->
                        <ScrollViewer Grid.Row="1" 
                                      VerticalScrollBarVisibility="Auto"
                                      MaxHeight="120">
                            <StackPanel x:Name="spnGainers"/>
                        </ScrollViewer>

                        <!-- è·Œå¹…æ ‡é¢˜ -->
                        <TextBlock Grid.Row="2"
                                   Text="ðŸ“‰ ä»Šæ—¥è·Œå¹…æŽ’è¡Œæ¦œ"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="#212121"
                                   Margin="0,20,0,15"/>

                        <!-- è·Œå¹…åˆ—è¡¨ -->
                        <ScrollViewer Grid.Row="3" 
                                      VerticalScrollBarVisibility="Auto"
                                      MaxHeight="120">
                            <StackPanel x:Name="spnLosers"/>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- ä¸‹åŠéƒ¨åˆ†ï¼šå›¾è¡¨åŒºåŸŸ -->
                <Border Grid.Row="1"
                        Background="White"
                        CornerRadius="8"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        Effect="{StaticResource CardShadow}"
                        Padding="25,20"
                        MinHeight="400">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*" MinHeight="320"/>
                        </Grid.RowDefinitions>

                        <!-- å›¾è¡¨æ ‡é¢˜å’Œå·¥å…·æ  -->
                        <Grid Grid.Row="0" Margin="0,0,0,16">
                            <TextBlock Text="ðŸ“Š æ”¶è—è‚¡ç¥¨ä»·æ ¼èµ°åŠ¿"
                                       FontSize="18"
                                       FontWeight="Bold"
                                       Foreground="#212121"
                                       VerticalAlignment="Center"/>

                            <StackPanel Orientation="Horizontal" 
                                        HorizontalAlignment="Right">
                                <TextBlock Text="æ—¶é—´èŒƒå›´:" 
                                           VerticalAlignment="Center" 
                                           Margin="0,0,10,0"
                                           FontSize="14"
                                           Foreground="#616161"/>
                                <ComboBox x:Name="cmbChartRange" 
                                          Width="120" 
                                          Height="32"
                                          FontSize="13"
                                          SelectedIndex="1"
                                          SelectionChanged="CmbChartRange_SelectionChanged">
                                    <ComboBoxItem Content="7å¤©"/>
                                    <ComboBoxItem Content="30å¤©"/>
                                    <ComboBoxItem Content="90å¤©"/>
                                </ComboBox>
                                <Button x:Name="btnRefreshChart" 
                                        Content="ðŸ”„ åˆ·æ–°æ•°æ®" 
                                        Width="100"
                                        Margin="15,0,0,0"
                                        Click="BtnRefreshChart_Click"
                                        Style="{StaticResource ModernButtonStyle}"/>
                            </StackPanel>
                        </Grid>

                        <!-- å›¾è¡¨ç±»åž‹åˆ‡æ¢ -->
                        <StackPanel Grid.Row="1" 
                                    Orientation="Horizontal" 
                                    Margin="0,0,0,16">
                            <RadioButton x:Name="rbLineChart" 
                                         Content="ðŸ“ˆ æŠ˜çº¿å›¾ï¼ˆä»·æ ¼èµ°åŠ¿ï¼‰" 
                                         IsChecked="True"
                                         FontSize="14"
                                         Margin="0,0,30,0"
                                         Checked="ChartType_Changed"/>
                            <RadioButton x:Name="rbBarChart" 
                                         Content="ðŸ“Š æŸ±çŠ¶å›¾ï¼ˆæˆäº¤é‡ï¼‰"
                                         FontSize="14"
                                         Checked="ChartType_Changed"/>
                        </StackPanel>

                        <!-- å›¾è¡¨æŽ§ä»¶ -->
                        <Grid Grid.Row="2">
                            <!-- æŠ˜çº¿å›¾ - ç§»é™¤ç»‘å®šï¼Œåœ¨ä»£ç ä¸­è®¾ç½® -->
                            <lvc:CartesianChart x:Name="LineChart"
                                                Visibility="Visible"
                                                Background="Transparent"
                                                Zoom="X"
                                                Pan="X"
                                                DisableAnimations="False"
                                                Hoverable="True"
                                                LegendLocation="Top">
                                <lvc:CartesianChart.AxisX>
                                    <lvc:Axis x:Name="AxisXLine" 
                                              Title="æ—¥æœŸ" 
                                              LabelsRotation="45"
                                              FontSize="11"
                                              Foreground="#757575">
                                        <lvc:Axis.Separator>
                                            <lvc:Separator StrokeThickness="0.5" 
                                                           Stroke="#E0E0E0"/>
                                        </lvc:Axis.Separator>
                                    </lvc:Axis>
                                </lvc:CartesianChart.AxisX>
                                <lvc:CartesianChart.AxisY>
                                    <lvc:Axis x:Name="AxisYLine" 
                                              Title="ä»·æ ¼ ($)" 
                                              FontSize="11"
                                              Foreground="#757575">
                                        <lvc:Axis.Separator>
                                            <lvc:Separator StrokeThickness="0.5" 
                                                           Stroke="#E0E0E0"/>
                                        </lvc:Axis.Separator>
                                    </lvc:Axis>
                                </lvc:CartesianChart.AxisY>
                                <lvc:CartesianChart.DataTooltip>
                                    <lvc:DefaultTooltip Background="#E3F2FD" 
                                                        BorderBrush="#2196F3" 
                                                        BorderThickness="1"
                                                        CornerRadius="4"
                                                        Padding="10"
                                                        Foreground="#212121"
                                                        FontSize="12"/>
                                </lvc:CartesianChart.DataTooltip>
                            </lvc:CartesianChart>

                            <!-- æŸ±çŠ¶å›¾ - ç§»é™¤ç»‘å®šï¼Œåœ¨ä»£ç ä¸­è®¾ç½® -->
                            <lvc:CartesianChart x:Name="BarChart"
                                                Visibility="Collapsed"
                                                Background="Transparent"
                                                Zoom="None"
                                                Pan="None"
                                                DisableAnimations="False"
                                                Hoverable="True"
                                                LegendLocation="Top">
                                <lvc:CartesianChart.AxisX>
                                    <lvc:Axis x:Name="AxisXBar" 
                                              Title="è‚¡ç¥¨" 
                                              FontSize="11"
                                              Foreground="#757575">
                                    </lvc:Axis>
                                </lvc:CartesianChart.AxisX>
                                <lvc:CartesianChart.AxisY>
                                    <lvc:Axis x:Name="AxisYBar" 
                                              Title="æˆäº¤é‡" 
                                              FontSize="11"
                                              Foreground="#757575"
                                              MinValue="0">
                                    </lvc:Axis>
                                </lvc:CartesianChart.AxisY>
                                <lvc:CartesianChart.DataTooltip>
                                    <lvc:DefaultTooltip Background="#E8F5E9" 
                                                        BorderBrush="#4CAF50" 
                                                        BorderThickness="1"
                                                        CornerRadius="4"
                                                        Padding="10"
                                                        Foreground="#212121"
                                                        FontSize="12"/>
                                </lvc:CartesianChart.DataTooltip>
                            </lvc:CartesianChart>

                            <!-- åŠ è½½æç¤º -->
                            <Border x:Name="LoadingOverlay"
                                    Background="#80FFFFFF"
                                    Visibility="Collapsed">
                                <StackPanel HorizontalAlignment="Center" 
                                            VerticalAlignment="Center">
                                    <TextBlock Text="â³ æ­£åœ¨åŠ è½½æ•°æ®..."
                                               FontSize="16"
                                               Foreground="#757575"
                                               HorizontalAlignment="Center"/>
                                    <ProgressBar IsIndeterminate="True" 
                                                 Width="200" 
                                                 Height="4"
                                                 Margin="0,12,0,0"/>
                                </StackPanel>
                            </Border>

                            <!-- æ— æ•°æ®æç¤º -->
                            <TextBlock x:Name="txtNoData"
                                       Text="æš‚æ— å›¾è¡¨æ•°æ®ï¼Œè¯·å…ˆæ·»åŠ æ”¶è—è‚¡ç¥¨"
                                       FontSize="14"
                                       Foreground="#9E9E9E"
                                       FontStyle="Italic"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Visibility="Collapsed"/>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
